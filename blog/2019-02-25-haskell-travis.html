<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Dead simple Haskell Travis settings for cabal and stack</title>
    <meta name="author" content="Dmitrii Kovanikov">
    <meta name="description" content="Travis CI settings for Haskell projects with cabal and stack">

    <link rel="stylesheet" href="/css/article.css">

    <!-- Metatags -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Dmitrii Kovanikov aka chshersh" />
    <meta property="og:title" content="Dead simple Haskell Travis settings for cabal and stack" />
    <meta property="og:description" content="Dmitrii Kovanikov's Personas Web Space" />
    <meta property="og:url" content="https://chshersh.com" />
    <!-- <meta property="og:image" content="/images/logo-yellow.png" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Dead simple Haskell Travis settings for cabal and stack" />
    <meta name="twitter:description" content="Travis CI settings for Haskell projects with cabal and stack" />
    <!-- <meta name="twitter:image:src" content="https://chshersh.com/images/logo-yellow.png" /> -->
    <meta name="twitter:url" content="https://chshersh.com" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
</head>
<body>
    <header>
      <h1>Dead simple Haskell Travis settings for cabal and stack</h1>
    </header>

    <main>
<p>Today I am going to share a simple <a href="https://travis-ci.com/">Travis CI</a> configuration for Haskell projects with you. The <code>.travis.yml</code> file presented in this blog post allows you to painlessly test your repository on the continuous integration service under multiple GHC versions and with both build tools ‚Äî <a href="https://www.haskell.org/cabal/users-guide/">cabal-install</a> and <a href="https://docs.haskellstack.org/en/stable/README/">stack</a>. Note that the suggested settings do not include complex configuration steps that could possibly be required for some projects. However, they work amazingly well for most Haskell libraries and applications where a basic setup is enough!</p>
<h2 id="the-config">The Config</h2>
<p>I‚Äôll cut to the chase, here is the <code>.travis.yml</code> file that you can copy-paste to each Haskell project and enjoy (hopefully) the green CI status:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="fu">sudo</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="fu">language</span><span class="kw">:</span><span class="at"> haskell</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="at">  </span><span class="fu">depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="fu">cabal</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2.4&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a><span class="fu">cache</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a><span class="at">  </span><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;$HOME/.cabal/store&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;$HOME/.stack&quot;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;$TRAVIS_BUILD_DIR/.stack-work&quot;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a><span class="at">  </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a><span class="co">  # Cabal</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.2.2</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.4.4</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.6.5</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a><span class="co">  # Stack</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.6.5</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span><span class="at"> STACK_YAML=&quot;$TRAVIS_BUILD_DIR/stack.yaml&quot;</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a><span class="fu">install</span><span class="kw">:</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a><span class="kw">  - </span><span class="ch">|</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>    if [ -z &quot;$STACK_YAML&quot; ]; then</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a>      ghc --version</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a>      cabal --version</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a>      cabal new-update</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>      cabal new-build --enable-tests --enable-benchmarks</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a>    else</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a>      # install stack</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a>      curl -sSL https://get.haskellstack.org/ | sh</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a>      # build project with stack</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a>      stack --version</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a>      stack build --system-ghc --test --bench --no-run-tests --no-run-benchmarks</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a>    fi</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a><span class="kw">  - </span><span class="ch">|</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a>    if [ -z &quot;$STACK_YAML&quot; ]; then</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a>      cabal new-test --enable-tests</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a>    else</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a>      stack test --system-ghc</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true"></a>    fi</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true"></a><span class="fu">notifications</span><span class="kw">:</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true"></a><span class="at">  </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<h2 id="customization-hlint">Customization: HLint</h2>
<p>I want to point out some nice things about this config ‚Äî it doesn‚Äôt mention the project name anywhere and it doesn‚Äôt rely on any additional shell scripts. Which means that you have the ability to paste it in any Haskell project and it <strong>should just work</strong> out of the box. Though, it‚Äôs not the only reason why I recommend it. This config requires almost no maintenance, but at the same time, it is easily extensible. For example, if you want to check your code with <a href="http://hackage.haskell.org/package/hlint">HLint</a> on every CI run, you just need to add the following line at the end of the <code>script</code> section:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">-</span><span class="at"> curl -sSL https://raw.github.com/ndmitchell/hlint/master/misc/run.sh | sh -s .</span></span></code></pre></div>
<p>This command downloads the latest HLint version and runs the <code>hlint</code> executable on your project.</p>
<h2 id="how-to-set-up-travis-ci">How to set up Travis CI</h2>
<p>A quick recap on how to make Travis CI work for your project:</p>
<ol type="1">
<li><a href="https://docs.travis-ci.com/user/tutorial/">Enable Travis CI for your GitHub account</a> if you haven‚Äôt done it before.</li>
<li>Enable Travis CI for your specific repository.</li>
<li>Copy-paste the given <code>.travis.yml</code> to your project.</li>
</ol>
<p>That‚Äôs all! Feel free to contact me if you have any problem setting up Travis CI for your Haskell projects with this config. I have done tons of <code>‚ÄúFix CI‚Äù</code> commits and learned about a lot of weird errors before figuring out the proper settings.</p>
<blockquote>
<p><strong>NOTE:</strong> If you build your project with <code>stack</code>, it is a good idea to put a fully configured <code>stack.yaml</code> file to the repository. There you can specify all the settings required for <code>stack</code> to build your project, but for basic cases, it should be enough to have only the resolver in there:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>resolver<span class="op">:</span> lts<span class="op">-</span><span class="fl">13.26</span></span></code></pre></div>
</blockquote>
<h2 id="explanation-of-the-configuration-commands">Explanation of the configuration commands</h2>
<p>Here is a short description of the commands used in the script:</p>
<ol type="1">
<li><code>sudo: true</code> allows us to use more powerful CI environment and increases the speed of building.</li>
<li>When you use <code>language: haskell</code>, the GHC and cabal versions for Ubuntu are taken from <a href="https://launchpad.net/~hvr/+archive/ubuntu/ghc">Herbert V. Riedel‚Äôs ppa</a>.</li>
<li>Setting <code>git depth</code> to 5 decreases the time for cloning the GitHub repo, by pruning the amount of history (commits) of the repo that is fetched.</li>
<li><code>STACK_YAML</code> environment variable is used to distinguish between Cabal and Stack builds. If you want to test multiple GHC versions with <code>stack</code> you only need to create <code>stack-VERSION.yaml</code> file specific to GHC version and add the corresponding number of items to the <code>matrix</code>.</li>
<li><code>new-</code> commands are used for Cabal since they provide a modern way to build Haskell projects with <code>cabal-install</code> in <a href="https://www.haskell.org/cabal/users-guide/">nix-style local builds</a>.</li>
<li><code>--system-ghc</code> flag is important for <code>stack</code> builds. Since you get the GHC version from the CI, <code>stack</code> doesn‚Äôt need to download them separately. That‚Äôs why, do remember to add this flag to every <code>stack</code> command you‚Äôre using.</li>
<li>Email notifications are disabled because they quickly become annoying. But the <code>notifications</code> section allows you to add a Slack integration, which can be handy.</li>
</ol>
<h2 id="reasoning-behind-such-a-ci-config">Reasoning behind such a CI config</h2>
<p>As you can see from the config, it contains several opinionated decisions, which can appear redundant or suboptimal. Here I am going to reveal the reasoning behind them.</p>
<h3 id="why-both-cabal-and-stack">Why both cabal and stack?</h3>
<p>You may ask, why would I need to test my project with two build tools? The answer is to be friendlier to the rest of the Haskell community. Yes, there are several build tools for Haskell with <code>cabal</code> and <code>stack</code> being the most popular ones. But, unfortunately, if the project builds with one of the tools, it doesn‚Äôt guarantee that it would also build with the other (though it works in <em>most</em> cases).</p>
<ol type="1">
<li>If your project builds with <code>stack</code> it may still fail to build with <code>cabal</code>. For example, if you don‚Äôt specify library bounds in the <code>build-depends</code> section, cabal solver might not find a valid plan to build your package with.</li>
<li>If your project builds with <code>cabal</code> it may still fail to build with <code>stack</code>. For example, some of your dependencies might not be in the Stackage snapshot, so you would need to add them into the <code>extra-deps</code> section in <code>stack.yaml</code>.</li>
</ol>
<p>If you test your Haskell package on CI with both Cabal and Stack you provide a better user experience for users of both the build tools. As a maintainer of multiple open-source libraries and applications, I try to make the life of the contributors and users of my packages easier by providing support for both <code>cabal</code> and <code>stack</code>. The fewer steps they need to do in order to make my project work in their current environment, the more chances they don‚Äôt give up halfway through fighting with the tooling. Also, if your Haskell package builds with <code>cabal</code> and <code>stack</code>, you can add it to both <a href="http://hackage.haskell.org/">Hackage</a> and <a href="https://www.stackage.org/">Stackage</a>.</p>
<h3 id="why-latest-3-major-ghc-versions">Why latest 3 major GHC versions?</h3>
<p>It is a huge temptation to use only the latest GHC version for your package with all brand new cool features. But even if migration to a newer GHC version is usually a painless process, it takes time for the whole Haskell ecosystem to catch up. And users of your Haskell package may still use a two year old GHC version. This usually happens in big applications where you cannot switch to a newer GHC version unless each of your dependencies supports it.</p>
<p>At the same time, it is highly desired to be able to bump up the version bounds only for some specific libraries (because of applied bug-fixes and performance improvements in the newer versions). But if newer versions require you to also switch to a newer compiler, you might not be able to do that because the migration of your application to a newer GHC version can be blocked by other libraries.</p>
<p>You can see why it is nice when libraries support older compiler versions as well. However, maintaining support for very old GHC versions might be a thankless and time-consuming thing to do. Also, the more GHC versions you test against on the CI, the more time you need to wait until CI passes. That‚Äôs why the latest 3 seem reasonable enough.</p>
<blockquote>
<p><strong>NOTE:</strong> you may notice from the configuration that the latest 3 GHC versions are tested only for <code>cabal-install</code> while <code>stack</code> builds only most recent version. This is done merely for convenience since in Stackage snapshots GHC versions are tightly coupled with dependency versions.</p>
</blockquote>
<h2 id="conclusion">Conclusion</h2>
<p>You can see now that it‚Äôs actually not that hard to run Travis CI for Haskell repositories! And the given configuration is easily extensible with more commands, like adding HLint, checking on a newer compiler version, building <a href="https://www.haskell.org/haddock/">Haddock</a> documentation, running benchmarks, etc. Dealing with CI errors requires time and patience. But at least with this config you don‚Äôt need to have multiple build tools and multiple GHC versions installed on your machine, you can delegate all this dirty work to the CI.</p>
<h2 id="appendix">Appendix</h2>
<p>In some situations it‚Äôs not possible to run CI for your Haskell project with both build tools easily. So below I‚Äôm providing separate configurations for each build tool.</p>
<h3 id="cabal-only-configuration">Cabal-only configuration</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="fu">sudo</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="fu">language</span><span class="kw">:</span><span class="at"> haskell</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a><span class="at">  </span><span class="fu">depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a><span class="fu">cabal</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2.4&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a><span class="fu">cache</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a><span class="at">  </span><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;$HOME/.cabal/store&quot;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a><span class="at">  </span><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.2.2</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.4.4</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.6.5</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="fu">install</span><span class="kw">:</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> ghc --version</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> cabal --version</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> cabal new-update</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> cabal new-build --enable-tests --enable-benchmarks</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true"></a><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> cabal new-test --enable-tests</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true"></a><span class="fu">notifications</span><span class="kw">:</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true"></a><span class="at">  </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<h3 id="stack-only-configuration">Stack-only configuration</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">sudo</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="fu">language</span><span class="kw">:</span><span class="at"> haskell</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a><span class="at">  </span><span class="fu">depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a><span class="fu">cache</span><span class="kw">:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a><span class="at">  </span><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;$HOME/.stack&quot;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;$TRAVIS_BUILD_DIR/.stack-work&quot;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true"></a><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true"></a><span class="at">  </span><span class="fu">Include</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.2.2</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span><span class="at"> STACK_YAML=&quot;$TRAVIS_BUILD_DIR/stack-8.2.2.yaml&quot;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.4.4</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span><span class="at"> STACK_YAML=&quot;$TRAVIS_BUILD_DIR/stack-8.4.4.yaml&quot;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">ghc</span><span class="kw">:</span><span class="at"> </span><span class="fl">8.6.5</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span><span class="at"> STACK_YAML=&quot;$TRAVIS_BUILD_DIR/stack.yaml&quot;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true"></a><span class="fu">install</span><span class="kw">:</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> curl -sSL https://get.haskellstack.org/ | sh</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> stack --version</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> stack build --system-ghc --test --bench --no-run-tests --no-run-benchmarks</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true"></a><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true"></a><span class="at">  </span><span class="kw">-</span><span class="at"> stack test --system-ghc</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true"></a><span class="fu">notifications</span><span class="kw">:</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true"></a><span class="at">  </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>

<hr>
<blockquote>
<p>If you liked this blog post, consider supporting my work on GitHub Sponsors, or following me on the Internet:</p>
<ul>
<li><a target="_blank" href="https://github.com/sponsors/chshersh">GitHub Sponsors: @chshersh</a></li>
<li><a target="_blank" href="https://youtube.com/c/chshersh">YouTube: @chshersh</a></li>
<li><a target="_blank" href="https://x.com/ChShersh">ùïè: @chshersh</a></li>
<li><a target="_blank" href="https://bsky.app/profile/chshersh.com">BlueSky: @chshersh</a></li>
<li><a target="_blank" href="https://functional.cafe/@chshersh">Mastodon: functional.cafe@chshersh</a></li>
<li><a target="_blank" href="https://www.twitch.tv/chshersh">Twitch: @chshersh </a></li>
</ul>
</blockquote>
    </main>
</body>
</html>
